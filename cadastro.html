<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Cadastro - PetShop</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="index.html">PET SHOP</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="cadastro.html">Cadastro</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Serviços</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="servicos.html">Banho e Tosa</a></li>
                            <li><hr class="dropdown-divider" /></li>
                            <li><a class="dropdown-item" href="agendamento.html">Agendamento</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Produtos</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="racaoseca.html">Ração Seca</a></li>
                            <li><hr class="dropdown-divider" /></li>
                            <li><a class="dropdown-item" href="racaoumida.html">Ração Úmida</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="dados.html">Dados</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Header-->
    <header class="bg-dark py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">PET SHOP</h1>
                <p class="lead fw-normal text-white-50 mb-0">Deixe seu pet brilhando de alegria – Banho e Tosa com carinho e cuidado!</p>
            </div>
        </div>
    </header>   
    <!-- Content-->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center">Cadastro de Cliente</h2>
            <form id="cadastroClienteForm">
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input type="text" class="form-control" id="nome" placeholder="Digite seu nome" required>
                </div>
                <div class="form-group">
                    <label for="endereco">Endereço:</label>
                    <input type="text" class="form-control" id="endereco" placeholder="Digite seu endereço (nome da rua, numero, nome do bairro, cidade e estado)" required>
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="tel" class="form-control" id="telefone" placeholder="Digite seu telefone" required oninput="formatarTelefone(this)">
                </div>
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" class="form-control" id="email" placeholder="Digite seu e-mail" required>
                </div>
                <button type="button" class="btn btn-primary mt-3" onclick="cadastrarCliente()">Cadastrar Cliente</button>
            </form>

            <h2 class="text-center mt-5">Cadastro de Pet</h2>
            <form id="cadastroPetForm">
                <div class="form-group">
                    <label for="nomePet">Nome do Pet:</label>
                    <input type="text" class="form-control" id="nomePet" placeholder="Digite o nome do pet" required>
                </div>
                <div class="form-group">
                    <label for="tipo">Tipo:</label>
                    <select class="form-control" id="tipo" onchange="atualizarFormulario()" required>
                        <option value="">Selecione o tipo</option>
                        <option value="cachorro">Cachorro</option>
                        <option value="gato">Gato</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="porte">Porte:</label>
                    <select class="form-control" id="porte" onchange="atualizarFormulario()" required>
                        <option value="">Selecione o porte do Pet:</option>
                        <option value="Grande">Grande</option>
                        <option value="Pequeno">Pequeno</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="raca">Raça:</label>
                    <select class="form-control" id="raca" required>
                        <option value="">Selecione a raça</option>
                        <!-- Opções serão preenchidas via JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="temperamento">Temperamento:</label>
                    <select class="form-control" id="temperamento" required>
                        <option value="">Selecione o temperamento</option>
                        <option value="Calmo">Calmo</option>
                        <option value="Brincalhão">Brincalhão</option>
                        <option value="Ativo">Ativo</option>
                        <option value="Agressivo">Agressivo</option>
                        <!-- Adicione mais temperamentos conforme necessário -->
                    </select>
                </div>
                <button type="button" class="btn btn-primary mt-3" onclick="adicionarPet()">Adicionar Pet</button>
            </form>

            <div id="listaPets" class="mt-4"></div>

            <button type="button" class="btn btn-success mt-4" onclick="finalizarCadastro()">Finalizar Cadastro</button>

        </div>
    </section>

    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container"><p class="m-0 text-center text-white">&copy; 2024 PetShop. Todos os direitos reservados.</p></div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
    <script>
        function formatarTelefone(input) {
            let value = input.value.replace(/\D/g, ''); // Remove tudo que não é dígito

            if (value.length <= 2) {
                input.value = `(${value}`;
            } else if (value.length <= 7) {
                input.value = `(${value.slice(0, 2)}) ${value.slice(2)}`;
            } else {
                input.value = `(${value.slice(0, 2)}) ${value.slice(2, 7)}-${value.slice(7, 11)}`;
            }
        }

        function validarEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

        function cadastrarCliente() {
            // Validação dos campos do cliente
            const nome = document.getElementById('nome').value.trim();
            const endereco = document.getElementById('endereco').value.trim();
            const telefone = document.getElementById('telefone').value.trim();
            const email = document.getElementById('email').value.trim();

            if (!nome || !endereco || !telefone || !email) {
                alert('Por favor, preencha todos os campos do cliente.');
                return;
            }

            if (!validarEmail(email)) {
                alert('Por favor, insira um e-mail válido.');
                return;
            }

            const clienteAtual = {
                nome: nome,
                endereco: endereco,
                telefone: telefone,
                email: email,
                pets: []
            };

            // Salva o cliente no localStorage
            const clientes = JSON.parse(localStorage.getItem('clientes')) || [];
            clientes.push(clienteAtual);
            localStorage.setItem('clientes', JSON.stringify(clientes));

            alert('Cliente cadastrado com sucesso!');
            document.getElementById('cadastroClienteForm').reset();
        }

        function adicionarPet() {
            // Obtém o cliente atual
            const clientes = JSON.parse(localStorage.getItem('clientes')) || [];
            const clienteAtual = clientes[clientes.length - 1]; 

            if (!clienteAtual) {
                alert('Por favor, cadastre o cliente antes de adicionar um pet.');
                return;
            }
            
            // Validação dos campos do pet
            const nomePet = document.getElementById('nomePet').value.trim();
            const tipo = document.getElementById('tipo').value.trim();
            const porte = document.getElementById('porte').value.trim();
            const raca = document.getElementById('raca').value.trim();
            const temperamento = document.getElementById('temperamento').value.trim();

            if (!nomePet || !tipo  || !porte || !raca || !temperamento) {
                alert('Por favor, preencha todos os campos do pet.');
                return;
            }

            const pet = {
                nomePet: nomePet,
                tipo: tipo,
                porte: porte,
                raca: raca,
                temperamento: temperamento
            };
                        
            clienteAtual.pets.push(pet);

            // Atualiza o localStorage
            const clientesAtualizados = JSON.parse(localStorage.getItem('clientes')) || [];
            clientesAtualizados[clientesAtualizados.length - 1] = clienteAtual;
            localStorage.setItem('clientes', JSON.stringify(clientesAtualizados));
            
            alert('Pet cadastrado com sucesso!');
            document.getElementById('cadastroPetForm').reset();
        }

        function atualizarFormulario() {
            const tipo = document.getElementById('tipo').value;
            const porte = document.getElementById('porte').value ? document.getElementById('porte').value : '';
            const racaSelect = document.getElementById('raca');

            const racasCachorroPequeno = ['outro','Chihuahua','Pomeranian (Spitz Alemão)','Yorkshire Terrier','Shih Tzu','Dachshund (Teckel)','French Bulldog','Pug','Cavalier King Charles Spaniel','Miniature Schnauzer','Boston Terrier','Bichon Frisé','Papillon','Maltese','Havanese','Pekingese']; 
            const racasCachorroGrande = ['outro','Golden Retriever','Labrador Retriever','German Shepherd (Pastor Alemão)','Rottweiler','Great Dane (Dog Alemão)','Bernese Mountain Dog (Boiadeiro Bernês)','Doberman Pinscher','Mastiff','Saint Bernard (São Bernardo)','Newfoundland (Terra-Nova)','Alaskan Malamute','Akita','Irish Wolfhound (Lobo Irlandês)','Leonberger','Cane Corso'];
            const racasGatoPequeno = ['outro','Singapura','Munchkin','Cornish Rex','Devon Rex','Siamese','Oriental Shorthair','Balinese','Burmese','Tonkinese','Russian Blue','Japanese Bobtail','Abyssinian','American Curl','Sphynx','LaPerm'];
            const racasGatoGrande = ['outro','Maine Coon','Savannah','Ragdoll','Norwegian Forest Cat (Gato da Floresta Norueguês)','Siberian','British Shorthair','Chausie','Ragamuffin','Turkish Van','Bengal','Chartreux','Abyssinian','Highlander','Selkirk Rex','Pixie-Bob'];

            // Limpa o campo de raças
            racaSelect.innerHTML = '<option value="">Selecione a raça</option>';

            if (tipo === 'cachorro' && porte === 'Pequeno') {
                racasCachorroPequeno.forEach(raca => {
                    racaSelect.innerHTML += `<option value="${raca}">${raca}</option>`;
                });
            } else if (tipo === 'cachorro' && porte === 'Grande') {
                racasCachorroGrande.forEach(raca => {
                    racaSelect.innerHTML += `<option value="${raca}">${raca}</option>`;
                });
            } else if (tipo === 'gato' && porte === 'Pequeno') {
                racasGatoPequeno.forEach(raca => {
                    racaSelect.innerHTML += `<option value="${raca}">${raca}</option>`;
                });
            } else if (tipo === 'gato' && porte === 'Grande') {
                racasGatoGrande.forEach(raca => {
                    racaSelect.innerHTML += `<option value="${raca}">${raca}</option>`;
                });
            }
        }

        function finalizarCadastro() {
            const clientes = JSON.parse(localStorage.getItem('clientes')) || [];
            if (clientes.length === 0 || clientes[clientes.length - 1].pets.length === 0) {
                alert('É necessário cadastrar o cliente e pelo menos um pet.');
                return;
            }

            alert('Cadastro finalizado com sucesso!');
            // Limpar o formulário e atualizar a lista de usuários
            atualizarListaUsuarios();
            document.getElementById('cadastroClienteForm').reset();
            document.getElementById('cadastroPetForm').reset();
        }

        function atualizarListaUsuarios() {
            const clientes = JSON.parse(localStorage.getItem('clientes')) || [];
            const listaUsuariosDiv = document.getElementById('listaUsuarios');
        }

        // Inicializa a lista de usuários ao carregar a página
        document.addEventListener('DOMContentLoaded', atualizarListaUsuarios);
    </script>
</body>
</html>
